@using Harmony.Application.DTO.Search
@using Harmony.Client.Infrastructure.Helper
<MudStack Class="SearchStack">
    <MudAutocomplete @ref="_autoComplete" T="SearchableCard" @bind-Value="_selectedCard" Margin="Margin.Dense"
                     Clearable="true" Placeholder="Search" Class="app-search-bar"
                     DebounceInterval="700"
                     Style="width:250px"
                     ShowProgressIndicator="true" ProgressIndicatorColor="Color.Default"
                     SearchFuncWithCancel="@Search" Variant="Variant.Outlined">
        <ItemTemplate Context="card">
            <MudPaper Class="pa-4" @onclick="@(() => Navigate(card))">
                <MudStack Row="true">
                    <MudTooltip Text="@card.IssueType" Delay="2000">
                        <MudIcon Size="Size.Large" Icon="@ColorHelper.GetIssueTypeIcon(card.IssueType)"
                                 Color="ColorHelper.GetIssueTypeColor(card.IssueType)" />
                    </MudTooltip>
                    <MudStack Justify="Justify.Center" Spacing="0">
                        <MudText Typo="Typo.body1">@card.Title</MudText>
                        <MudText Typo="Typo.body2">@card.BoardTitle: @card.List</MudText>
                    </MudStack>
                </MudStack>
            </MudPaper>
        </ItemTemplate>
    </MudAutocomplete>
</MudStack>
